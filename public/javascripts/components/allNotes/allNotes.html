<form name="adedTasks" class="form-group">
    <div class="form-group">
        <div class="form-group">
            <label>Поиск</label>
        </div>
        <input type="text" class="form-control ng-pristine ng-valid ng-empty ng-touched" ng-model="filterText">
    </div>
</form>
<ul class="list-filters-day">
    <li class="list-filters-day__item">
        <div class="form-group filter-check-flex">
            <input type="radio" name="filterDays" id="toDays" class="filter-check-flex__input hide" checked>
            <label for="toDays" class="filter-check-flex__label  btn btn-primary" ng-click="ctrl.getToDayClients()" ng-checked="true">За сегодня
            </label>
        </div>
    </li>
    <li class="list-filters-day__item">
        <div class="form-group filter-check-flex">
            <input type="radio" name="filterDays" id="prevDay" class="filter-check-flex__input hide">
            <label for="prevDay" class="filter-check-flex__label btn btn-primary" ng-click="ctrl.prevDaysFilter()">За вчера
            </label>
        </div>
    </li>
    <li class="list-filters-day__item">
        <div class="form-group filter-check-flex">
            <input type="radio" name="filterDays" id="toDay" class="filter-check-flex__input hide">
            <label for="toDay" class="filter-check-flex__label  btn btn-primary" ng-click="ctrl.allTaskFilter()">Полностью все
            </label>
        </div>
    </li>
</ul>

<div class="clearfix"></div>
<div class="panel panel-default all-task-list panel-loading-dn" ng-class="[ctrl.taskOpens ? '' : 'close-task',note.statusInd ? 'hide' : '',note.statusDelete ? 'hide' : '']" ng-repeat="note in ctrl.allClients | orderBy:'text'  | filter : filterText track by $index">
    <div class="panel-heading" ng-click="[ctrl.taskOpen($event),ctrl.taskOpens = !ctrl.taskOpens]">
        <div class="row">
            <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7 ng-binding">
                {{note.nameNotes}}
            </div>
            <!--<p>{{note.dateOfCreation}}</p>-->
            <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="row">
                            <div class="col-lg-12 ">
                                <ul class="btn-list">
                                    <li class="btn-list__item">
                                        <button ng-click="ctrl.historyTask($event,$index)" class="btn btn-primary pull-right glyphicon glyphicon-ok"></button>
                                    </li>
                                    <li class="btn-list__item">
                                        <button ng-click="ctrl.deleteTask($event,$index)" class="btn btn-primary pull-right glyphicon glyphicon-trash"></button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
    <div class="panel-body">
        <div class="all-task-list-item__info clearfix">
            <div class="form-group clearfix">
                <div class="row">
                    <div class="col-lg-4 col-md-4 col-sm-6">
                        <p class="notes-title-min">Задолжность в Л. по позициям</p>
                        <hr>
                        <div class="row">
                            <div class="col-lg-12">
                                <ul class="list-notes">
                                    <li class="list-notes__item" ng-repeat="(key, value) in note.positions">
                                        <span class="list-notes__text">{{value.name}}</span>
                                        <span class="list-notes__span">{{value.value}}</span>
                                        <input type="text" class="form-control list-notes__input" ng-model="value.value" ng-class="activeInput ? 'show': 'hide'">
                                        <button class="list-notes__btn btn btn-primary pull-right" ng-click="ctrl.refactorThisPosition(activeInput = true)"  ng-class="activeInput ? 'hide': 'show'">
                                            <span class="glyphicon glyphicon-pencil"></span>
                                        </button>
                                        <button class="list-notes__btn btn btn-primary pull-right" ng-click="ctrl.refactoring(note,activeInput = false)"  ng-class="activeInput ? 'show': 'hide'">
                                            <span class="glyphicon glyphicon-ok"></span>
                                        </button>
                                        <div class="clearfix"></div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-2 col-sm-6">
                        <p class="notes-title-min">В ГРН.</p>
                        <hr>
                        <div class="row">
                            <div class="col-lg-12">
                                <ul class="list-notes">
                                    <li class="list-notes__item" ng-repeat="(key, value) in note.positions">
                                        <span class="list-notes__text">{{value.name}}</span>
                                        <span class="list-notes__span">{{value.value * value.coefficient}}</span>
                                    </li>
                                </ul>
                                <h2 class="h2"><span class="total-summ-text">сумма: </span>{{ctrl.totalSumm(note.positions)}}</h2>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-2 col-sm-6 col-xs-12 pull-right">
                        <p class="notes-title-min">Опции</p>
                        <hr>
                        <ul class="list-notes">
                            <li class="list-notes__item " ng-repeat="(key, value) in note.positions">
                                <span class="option-name">{{value.name}}</span><button type="button" class="btn btn-primary pull-right list-notes__btn_right" ng-click="ctrl.opensModal(value)">Очистить</button>
                            </li>
                        </ul>
                    </div>
                    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                        <p class="notes-title-min">Цена</p>
                        <hr>
                        <ul class="list-coefficient">
                            <li class="list-coefficient__item " ng-repeat="(key, value) in note.positions">
                                <div class="row">
                                    <div class="col-lg-2 col-md-2 col-sm-2 col-xs-4">
                                        <span class="list-coefficient__info">{{value.coefficient}}</span>
                                    </div>
                                    <div class="col-lg-8 col-md-8 col-sm-8 row col-xs-6">
                                        <input type="text" class="form-control list-notes__input" ng-class="activeInputCoef ? 'show': 'hide'" ng-model="value.coefficient">
                                    </div>
                                    <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 fl-media-r">
                                        <button class="list-notes__btn btn btn-primary pull-right" ng-class="activeInputCoef ? 'hide': 'show'" ng-click="[activeInputCoef = !activeInputCoef,ctrl.refactorThisPosition()]">
                                            <span class="glyphicon glyphicon-pencil"></span>
                                        </button>
                                        <button class="list-notes__btn btn btn-primary pull-right" ng-click="ctrl.refactoring(note,activeInputCoef = false)"  ng-class="activeInputCoef ? 'show': 'hide'">
                                            <span class="glyphicon glyphicon-ok"></span>
                                        </button>
                                    </div>
                                </div>
                                <div class="clearfix"></div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>

            <form  name="txt">
                <h3 class="h3">Заметка</h3>
                <div class="panel panel-default media-panel-all">
                    <div class="panel-body">
                        <p class="text-notes-info">{{note.textNotes}}</p>
                        <button class="text-btn btn btn-primary pull-right glyphicon glyphicon-pencil" ng-click="ctrl.openTextArea($event,ctrl.save = !ctrl.save)"></button>
                        <button class="text-btn text-btn_remove btn btn-primary pull-right glyphicon glyphicon-remove" ng-class="ctrl.save ? 'show':''" ng-click="ctrl.closeTextArea($event,valueTextArea = '',ctrl.save = false)"></button>
                        <button class="text-btn text-btn_save btn btn-primary pull-right glyphicon glyphicon-ok" ng-class="ctrl.save ? 'show':''" ng-click="ctrl.saveText($event,ctrl.save = false)"></button>
                    </div>
                </div>
                <div class="textarea-block">
                    <textarea class="main-textarea-red-mess form-control" ng-model="note.textNotes" id="" cols="30" rows="10" >{{note.textNotes}}</textarea>
                </div>
            </form>
            <div class="clearfix"></div>
            <button class="list-notes__btn list-notes__btn_marg-top btn btn-primary pull-right" ng-click="ctrl.refactoring(note)">
                <span class="glyphicon glyphicon-ok"></span>
            </button>
        </div>
    </div>
</div>